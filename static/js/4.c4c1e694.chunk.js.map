{"version":3,"sources":["store/actions/booking.js","containers/Bookings/Bookings.module.css","containers/Bookings/Bookings.js"],"names":["fetchBookings","dispatch","type","actionTypes","axios","get","then","res","console","log","bookings","Object","keys","data","map","ele","bookId","fetchBookingsSuccess","catch","err","createBooking","formData","post","changeOrigin","response","createBookingSuccess","name","createBookingInit","module","exports","Bookings","this","props","length","loading","onFetchBookings","showData","dateTimeHandler","date","dateTime","Date","dateP","getDate","getMonth","getFullYear","timeP","getHours","getMinutes","allBookings","mobile","email","webinar","title","event_on","className","classes","Fragment","Component","connect","state","actionCreator"],"mappings":"wPAuBaA,EAAgB,WACzB,OAAO,SAAAC,GACHA,EArBG,CACHC,KAAMC,MAsBNC,IAAMC,IAAI,kBACLC,MAAK,SAAAC,GACFC,QAAQC,IAAIF,GACZ,IAAMG,EAAWC,OAAOC,KAAKL,EAAIM,MAAMC,KAAI,SAAAC,GAAG,kCACvCR,EAAIM,KAAKE,IAD8B,IAE1CC,OAAQD,OAEZd,EAlBoB,SAACS,GACjC,MAAO,CACHR,KAAMC,IACNO,SAAUA,GAeOO,CAAqBP,OAEjCQ,OAAM,SAAAC,GAAG,OAAIlB,EA1Bf,CACHC,KAAMC,WAqCDiB,EAAgB,SAACC,GAC1B,OAAO,SAAApB,GACHG,IAAMkB,KAAK,iBAAkBD,EAAU,CAACE,cAAc,IACjDjB,MAAK,SAAAkB,GACFvB,EAZoB,SAACoB,GAEjC,OADAb,QAAQC,IAAIY,EAAU,wBACf,CACHnB,KAAMC,IACNU,KAAMQ,GAQWI,CAAqB,2BACvBJ,GADsB,IAEzBL,OAAQQ,EAASX,KAAKa,YAG7BR,OAAM,SAAAC,GAAG,OAAIX,QAAQC,IAAIU,QAKzBQ,EAAoB,WAC7B,MAAO,CACHzB,KAAMC,O,mBC/DdyB,EAAOC,QAAU,CAAC,SAAW,6B,2ICMvBC,E,uKACF,WACuC,IAA/BC,KAAKC,MAAMtB,SAASuB,QAAiBF,KAAKC,MAAME,SAChDH,KAAKC,MAAMG,oB,oBAGnB,WACI,IAAIC,EAAW,cAAC,IAAD,IAEf,IAAKL,KAAKC,MAAME,QAAS,CACrB,IAAMG,EAAkB,SAACC,GACrB,IAAMC,EAAW,IAAIC,KAAKF,GACpBG,EAAK,UAAMF,EAASG,UAAf,YAA4BH,EAASI,WAArC,YAAmDJ,EAASK,eACjEC,EAAK,UAAMN,EAASO,WAAf,YAA6BP,EAASQ,cACjD,MAAM,GAAN,OAAUN,EAAV,YAAmBI,IAGjBG,EAAcjB,KAAKC,MAAMtB,SAASI,KAAI,SAAAC,GACxC,OACI,+BACI,6BAAKA,EAAIC,SACT,6BAAKD,EAAIW,OACT,6BAAKX,EAAIkC,SACT,6BAAKlC,EAAImC,QACT,6BAAKnC,EAAIoC,QAAQC,QACjB,6BAAKf,EAAgBtB,EAAIoC,QAAQE,cAN5BtC,EAAIC,WAWrBoB,EACI,qBAAKkB,UAAWC,IAAQzB,SAAxB,SACI,gCACI,kCACA,+BACI,4CACA,sCACA,wCACA,uCACA,yCACA,6CAEHkB,SAQjB,OACI,eAAC,IAAMQ,SAAP,WACI,8CACCpB,S,GArDMqB,aAwERC,uBAbS,SAAAC,GACpB,MAAO,CACHjD,SAAUiD,EAAMjD,SAChBwB,QAASyB,EAAMzB,YAII,SAAAjC,GACvB,MAAO,CACHkC,gBAAiB,kBAAMlC,EAAS2D,WAIzBF,CAA6C5B","file":"static/js/4.c4c1e694.chunk.js","sourcesContent":["import * as actionTypes from './actionTypes';\nimport axios from \"axios\";\n\nexport const fetchBookingsStart = () => {\n    return {\n        type: actionTypes.FETCH_BOOKINGS_START\n    }\n}\n\nexport const fetchBookingsFail = () => {\n    return {\n        type: actionTypes.FETCH_BOOKINGS_FAIL\n    }\n}\n\n\nexport const fetchBookingsSuccess = (bookings) => {\n    return {\n        type: actionTypes.FETCH_BOOKINGS_SUCCESS,\n        bookings: bookings\n    }\n}\n\nexport const fetchBookings = () => {\n    return dispatch => {\n        dispatch(fetchBookingsStart());\n\n        axios.get('/bookings.json')\n            .then(res => {\n                console.log(res);\n                const bookings = Object.keys(res.data).map(ele => ({\n                    ...res.data[ele],\n                    bookId: ele\n                }));\n                dispatch(fetchBookingsSuccess(bookings));\n            })\n            .catch(err => dispatch(fetchBookingsFail()));\n    }\n}\n\nexport const createBookingSuccess = (formData) => {\n    console.log(formData, 'createBookingSuccess');\n    return {\n        type: actionTypes.CREATE_BOOKING_SUCCESS,\n        data: formData\n    }\n}\n\nexport const createBooking = (formData) => {\n    return dispatch => {\n        axios.post('/bookings.json', formData, {changeOrigin: true})\n            .then(response => {\n                dispatch(createBookingSuccess({\n                    ...formData,\n                    bookId: response.data.name\n                }))\n            })\n            .catch(err => console.log(err));\n    }\n}\n\n\nexport const createBookingInit = () => {\n    return {\n        type: actionTypes.BOOKED_INIT\n    }\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Bookings\":\"Bookings_Bookings__YgaIr\"};","import React, {Component} from 'react';\nimport Spinner from '../../components/UI/Spinner/Spinner';\nimport classes from './Bookings.module.css';\nimport {connect} from \"react-redux\";\nimport * as actionCreator from '../../store/actions/booking';\n\n\nclass Bookings extends Component {\n    componentDidMount() {\n        if (this.props.bookings.length === 0 && !this.props.loading)\n            this.props.onFetchBookings();\n    }\n\n    render() {\n        let showData = <Spinner/>;\n\n        if (!this.props.loading) {\n            const dateTimeHandler = (date) => {\n                const dateTime = new Date(date);\n                const dateP = `${dateTime.getDate()}-${dateTime.getMonth()}-${dateTime.getFullYear()}`;\n                const timeP = `${dateTime.getHours()}:${dateTime.getMinutes()}`;\n                return `${dateP} ${timeP}`;\n            }\n\n            const allBookings = this.props.bookings.map(ele => {\n                return (\n                    <tr key={ele.bookId}>\n                        <td>{ele.bookId}</td>\n                        <td>{ele.name}</td>\n                        <td>{ele.mobile}</td>\n                        <td>{ele.email}</td>\n                        <td>{ele.webinar.title}</td>\n                        <td>{dateTimeHandler(ele.webinar.event_on)}</td>\n                    </tr>\n                )\n            })\n\n            showData = (\n                <div className={classes.Bookings}>\n                    <table>\n                        <tbody>\n                        <tr>\n                            <th>Booking ID</th>\n                            <th>Name</th>\n                            <th>Mobile</th>\n                            <th>Email</th>\n                            <th>Webinar</th>\n                            <th>Event On</th>\n                        </tr>\n                        {allBookings}\n                        </tbody>\n                    </table>\n                </div>\n            );\n        }\n\n\n        return (\n            <React.Fragment>\n                <h1>All Bookings</h1>\n                {showData}\n            </React.Fragment>\n        );\n    }\n}\n\nconst mapStateToProps = state => {\n    return {\n        bookings: state.bookings,\n        loading: state.loading\n    }\n}\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        onFetchBookings: () => dispatch(actionCreator.fetchBookings())\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Bookings);"],"sourceRoot":""}